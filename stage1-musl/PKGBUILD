# Maintainer: Samuel Holland <samuel@sholland.net>

pkgname=stage1-musl
pkgver=0.9.14
pkgrel=1
pkgdesc="Temporary static musl C library - Starch stage 0"
arch=('i686' 'x86_64')
url="http://www.musl-libc.org/"
license=('MIT')
makedepends=('stage0-binutils' 'stage0-gcc')
options=(strip !libtool staticlibs !upx !debug)
source=(http://www.musl-libc.org/releases/musl-$pkgver.tar.gz)
md5sums=('bfb685695aa942e64c63170589e575b2')

build() {
  cd "$srcdir/musl-$pkgver"

  CROSS_COMPILE=$CHOST- \
  ./configure \
    --host=$CHOST --prefix=/stage1 \
    --disable-shared
  make
}

package() {
  cd "$srcdir/musl-$pkgver"

  make DESTDIR="$pkgdir/" install
}
