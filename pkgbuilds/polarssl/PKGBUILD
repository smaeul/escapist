pkgbase=libpolarssl
pkgname=('libpolarssl' 'polarssl')
pkgver=1.3.4
pkgrel=1
pkgdesc="SSL/TLS Cryptography Library"
arch=('i686' 'x86_64')
url="http://polarssl.org/"
license=('GPL2')
checkdepends=('perl')
source=(http://polarssl.org/code/releases/polarssl-${pkgver}-gpl.tgz)

build() {
  cd "${srcdir}/polarssl-${pkgver}"

  make PREFIX= no_test
}

check() {
  cd "${srcdir}/polarssl-${pkgver}"

  make check
}

package_libpolarssl() {
  cd "${srcdir}/polarssl-${pkgver}"

  make PREFIX= DESTDIR="${pkgdir}" install
  rm -r "${pkgdir}/bin"
}

package_polarssl() {
  cd "${srcdir}/polarssl-${pkgver}"

  make PREFIX= DESTDIR="${pkgdir}" install
  rm -r "${pkgdir}/include" "${pkgdir}/lib"
}
